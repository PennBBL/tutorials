###################################################################################################
###################################################################################################
##########################         GRMPY - Generate Structual RDS        ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/08/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine the non-neuroimaging data into a single dataframe and assign the nominal
# variables as factors. This is needed before performing analysis with the roiWrapperCall.sh.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
#####################################################################
##### Reads in the Demographic, Irritability, and structQA Data #####
#####################################################################
demographics <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demographics_20171108.csv")
ARI <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Irritability_20171108.csv")
structQA <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_structQAFlags_20171108.csv")
structQA <- structQA[c("bblid","scanid", "ManualRating", "T1exclude")]
###########################################
##### Merges the DataSets Into in One #####
###########################################
dataSub <- merge(demographics, ARI, by=c("bblid","scanid"))
dataSub <- merge(dataSub, structQA, by=c("bblid","scanid"))
######################################################
##### Assign the Nominal Variables to be Factors #####
######################################################
dataSub$sex <- as.factor(dataSub$sex)
dataSub$ManualRating <- ordered(dataSub$ManualRating)
dataSub$race <- as.factor(dataSub$race)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(dataSub, "/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demo+ARI+QA_20171108.csv")
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
###################################################################################################
##########################         GRMPY - Generate Structual RDS        ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/08/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine the non-neuroimaging data into a single dataframe and assign the nominal
# variables as factors. This is needed before performing analysis with the roiWrapperCall.sh.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
#####################################################################
##### Reads in the Demographic, Irritability, and structQA Data #####
#####################################################################
demographics <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demographics_20171108.csv")
ARI <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Irritability_20171108.csv")
structQA <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_structQAFlags_20171108.csv")
structQA <- structQA[c("bblid","scanid", "ManualRating", "T1exclude")]
###########################################
##### Merges the DataSets Into in One #####
###########################################
dataSub <- merge(demographics, ARI, by=c("bblid","scanid"))
dataSub <- merge(dataSub, structQA, by=c("bblid","scanid"))
######################################################
##### Assign the Nominal Variables to be Factors #####
######################################################
dataSub$sex <- as.factor(dataSub$sex)
dataSub$ManualRating <- ordered(dataSub$ManualRating)
dataSub$race <- as.factor(dataSub$race)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(dataSub, "/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demo+ARI+QA_20171108.csv")
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
###################################################################################################
##########################         GRMPY - Generate Structual RDS        ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/08/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine the non-neuroimaging data into a single dataframe and assign the nominal
# variables as factors. This is needed before performing analysis with the roiWrapperCall.sh.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
#####################################################################
##### Reads in the Demographic, Irritability, and structQA Data #####
#####################################################################
demographics <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demographics_20171108.csv")
ARI <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Irritability_20171108.csv")
structQA <- read.csv("/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_structQAFlags_20171108.csv")
structQA <- structQA[c("bblid","scanid", "ManualRating", "T1exclude")]
###########################################
##### Merges the DataSets Into in One #####
###########################################
dataSub <- merge(demographics, ARI, by=c("bblid","scanid"))
dataSub <- merge(dataSub, structQA, by=c("bblid","scanid"))
######################################################
##### Assign the Nominal Variables to be Factors #####
######################################################
dataSub$sex <- as.factor(dataSub$sex)
dataSub$ManualRating <- ordered(dataSub$ManualRating)
dataSub$race <- as.factor(dataSub$race)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(dataSub, "/data/joy/BBL/tutorials/exampleData/roiWrapper/n20_Demo+ARI+QA_20171108.rds")
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
output<-read.csv("/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/results/n1111_rds_n1111_Renamed_inclusion_allinclude_ROI_n1111_CT/gam_formula_sageAtScan1k4_sex_CompositePredictor_idemoRelMeanRMSMotion_coefficients.csv")
View(output)
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
View(stai)
class(stai$staiPreTrait)
###################################################################################################
##########################           Brown - Generate RDS File           ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/22/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine all of the data that contains the predictors varaibles and ensure
# that they are in the correct format and class type.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
##########################################################################
##### Reads in the Data and Include the Data set with "staiPreTrait" #####
##########################################################################
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
#################################################################
##### Merges the DataSets Into in One with the new Variable #####
#################################################################
demographics <- merge(demographics, health, by=c("bblid","scanid"))
demographics <- merge(demographics, T1QA, by=c("bblid","scanid"))
demographics <- merge(demographics, motion, by=c("bblid","scanid"))
demographics <- merge(demographics, stai, by=c("bblid","scanid"))
#structQA <- structQA[c("bblid","scanid", "staiPreTrait")]
###################################
##### Apply Health Exclusions #####
###################################
demographics <- demographics[which(demographics$healthExcludev2 == 0),]
demographics <- demographics[which(demographics$t1Exclude == 0),]
demographics <- demographics[which(demographics$idemoRelMeanRMSMotion < .5),]
demographics$allinclude<-rep(1,dim(demographics)[1])
###########################################################################
##### Defines the Catigorical Varaibles - May Needs to Include Others #####
###########################################################################
demographics$sex <- as.factor(demographics$sex)
demographics$averageManualRating <- ordered(demographics$averageManualRating)
demographics$race <- as.factor(demographics$race)
demographics$staiPreTrait<- as.numeric(demographics$staiPreTrait)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(demographics, "/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_AllPredictors_20171122.rds")
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
#################################################################
##### Merges the DataSets Into in One with the new Variable #####
#################################################################
demographics <- merge(demographics, health, by=c("bblid","scanid"))
demographics <- merge(demographics, T1QA, by=c("bblid","scanid"))
demographics <- merge(demographics, motion, by=c("bblid","scanid"))
demographics <- merge(demographics, stai, by=c("bblid","scanid"))
structQA <- structQA[c("bblid","scanid", "staiPreTrait")]
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
stai <- stai[c("bblid","scanid", "staiPreTrait")]
View(stai)
demographics <- merge(demographics, health, by=c("bblid","scanid"))
demographics <- merge(demographics, T1QA, by=c("bblid","scanid"))
demographics <- merge(demographics, motion, by=c("bblid","scanid"))
demographics <- merge(demographics, stai, by=c("bblid","scanid"))
###################################
##### Apply Health Exclusions #####
###################################
demographics <- demographics[which(demographics$healthExcludev2 == 0),]
demographics <- demographics[which(demographics$t1Exclude == 0),]
demographics <- demographics[which(demographics$idemoRelMeanRMSMotion < .5),]
demographics$allinclude<-rep(1,dim(demographics)[1])
###########################################################################
##### Defines the Catigorical Varaibles - May Needs to Include Others #####
###########################################################################
demographics$sex <- as.factor(demographics$sex)
demographics$averageManualRating <- ordered(demographics$averageManualRating)
demographics$race <- as.factor(demographics$race)
demographics$staiPreTrait<- as.numeric(demographics$staiPreTrait)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(demographics, "/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_AllPredictors_20171122.rds")
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
readRDS("/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_AllPredictors_20171122.rds")
RDSM<-readRDS("/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_AllPredictors_20171122.rds")
View(RDSM)
RDSM$staiPreTrait
class(RDSM$staiPreTrait)
###################################################################################################
##########################           Brown - Generate RDS File           ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/22/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine all of the data that contains the predictors varaibles and ensure
# that they are in the correct format and class type.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
##########################################################################
##### Reads in the Data and Include the Data set with "staiPreTrait" #####
##########################################################################
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
#stai <- stai[c("bblid","scanid", "staiPreTrait")]
#################################################################
##### Merges the DataSets Into in One with the new Variable #####
#################################################################
demographics <- merge(demographics, health, by=c("bblid","scanid"))
demographics <- merge(demographics, T1QA, by=c("bblid","scanid"))
demographics <- merge(demographics, motion, by=c("bblid","scanid"))
demographics <- merge(demographics, stai, by=c("bblid","scanid"))
###################################
##### Apply Health Exclusions #####
###################################
demographics <- demographics[which(demographics$healthExcludev2 == 0),]
demographics <- demographics[which(demographics$t1Exclude == 0),]
demographics <- demographics[which(demographics$idemoRelMeanRMSMotion < .5),]
demographics$allinclude<-rep(1,dim(demographics)[1])
###########################################################################
##### Defines the Catigorical Varaibles - May Needs to Include Others #####
###########################################################################
demographics$sex <- as.factor(demographics$sex)
demographics$averageManualRating <- ordered(demographics$averageManualRating)
demographics$race <- as.factor(demographics$race)
demographics$staiPreTrait<- as.numeric(demographics$staiPreTrait)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(demographics, "/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_test_20171122.rds")
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
<-read.csv("")
OUTPUT<-read.csv("/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/results/n1111_rds_n1111_test_20171122_inclusion_allinclude_ROI_n1601_idemo_jlf_roivals_na-rm_20170710/gam_formula_sageAtScan1k4_sex_staiPreTrait_idemoRelMeanRMSMotion_coefficients.csv")
View(OUTPUT)
###################################################################################################
##########################           Brown - Generate RDS File           ##########################
##########################               Robert Jirsaraie                ##########################
##########################        rjirsara@pennmedicine.upenn.edu        ##########################
##########################                 11/22/2017                    ##########################
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
# Use #
# This script is used in order to combine all of the data that contains the predictors varaibles and ensure
# that they are in the correct format and class type.
###################################################################################################
#####  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  ⚡  #####
###################################################################################################
##########################################################################
##### Reads in the Data and Include the Data set with "staiPreTrait" #####
##########################################################################
demographics <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_demographics_go1_20161212.csv")
health <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_health_20170421.csv")
T1QA <- read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_t1QaData_20170306.csv")
motion <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_IdemoConnectQAData_20170718.csv")
stai <-read.csv("/data/joy//BBL/projects/brownIdemoPsych/data/n1601_stai_pre_post_itemwise_smry_factors_20170131.csv")
#stai <- stai[c("bblid","scanid", "staiPreTrait")]
#################################################################
##### Merges the DataSets Into in One with the new Variable #####
#################################################################
demographics <- merge(demographics, health, by=c("bblid","scanid"))
demographics <- merge(demographics, T1QA, by=c("bblid","scanid"))
demographics <- merge(demographics, motion, by=c("bblid","scanid"))
demographics <- merge(demographics, stai, by=c("bblid","scanid"))
###################################
##### Apply Health Exclusions #####
###################################
demographics <- demographics[which(demographics$healthExcludev2 == 0),]
demographics <- demographics[which(demographics$t1Exclude == 0),]
demographics <- demographics[which(demographics$idemoRelMeanRMSMotion < .5),]
demographics$allinclude<-rep(1,dim(demographics)[1])
###########################################################################
##### Defines the Catigorical Varaibles - May Needs to Include Others #####
###########################################################################
demographics$sex <- as.factor(demographics$sex)
demographics$averageManualRating <- ordered(demographics$averageManualRating)
demographics$race <- as.factor(demographics$race)
demographics$staiPreTrait<- as.numeric(demographics$staiPreTrait)
#####################################
##### Write the Output RDS File #####
#####################################
saveRDS(demographics, "/data/joy/BBL/projects/brownIdemoPsych/Test_RJJ/data/n1111_AllPredictors_20171122.rds")
View(stai)
class(stai$staiPreState)
class(stai$staiPreTraitPositive)
class(stai$staiPreTrait)
